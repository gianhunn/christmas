<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Christmas Countdown</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<!-- ========== GOOGLE FONTS - BALOO ========== -->
<div class="iframe-container">
  <iframe loading="lazy"
    src="https://www.canva.com/design/DAG56oQXObM/ccUw2e1x3cV9jV8PMTkvaw/view?embed" allowfullscreen="allowfullscreen" allow="fullscreen">
  </iframe>
  <a href="#" id="register-link" class="register-btn" target="_blank">
    <img src="images/register-btn.png" alt="Register">
  </a>
</div>

<!-- ========== COUNTDOWN REALTIME ========== -->
<div id="countdown-wrapper">
  <div class="time-box">
    <span id="days">0</span>
    <label>NG√ÄY</label>
  </div>
  <div class="time-box">
    <span id="hours">0</span>
    <label>GI·ªú</label>
  </div>
  <div class="time-box">
    <span id="minutes">0</span>
    <label>PH√öT</label>
  </div>
  <div class="time-box">
    <span id="seconds">0</span>
    <label>GI√ÇY</label>
  </div>
</div>

<script>
  // üëâ SET REGISTER LINK BASED ON URL PARAMETER
  function getUrlParameter(name) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(name);
  }

  function updateRegisterLink() {
    const code = getUrlParameter('code');
    const registerLink = document.getElementById('register-link');
    
    // Mapping of codes to their respective registration form links
    const codeToLinkMap = {
      '0371128': 'https://forms.gle/a6iezqAnViZFaMQw8',  // Update with actual link
      '0719144': 'https://forms.gle/Le6jtGtJmBRB3a3z6',  // Update with actual link
      '1214420': 'https://forms.gle/TYrmwRikzo2eLwcU7',
      '2134567': 'https://forms.gle/Le6jtGtJmBRB3a3z6',  // Update with actual link
      '2200022': 'https://forms.gle/aNcdfNUqMoZk4Mvg7',  // Update with actual link
      '2772000': 'https://forms.gle/GsSng8h8oH6dStPK7',  // Update with actual link
      '1471219': 'https://tally.so/r/KYpJrK',  // Update with actual link
      '1818780': 'https://forms.gle/Le6jtGtJmBRB3a3z6'   // Update with actual link
    };
    
    // Default link if code doesn't match or is not provided
    const defaultLink = 'https://forms.gle/Le6jtGtJmBRB3a3z6';
    
    // Set the href based on the code, or use default
    registerLink.href = codeToLinkMap[code] || defaultLink;
  }

  // Update register link on page load
  updateRegisterLink();

  // üëâ CH·ªàNH TH·ªúI GIAN K·∫æT TH√öC T·∫†I ƒê√ÇY
  const endDate = new Date("2025-12-21T23:59:59").getTime();

  function updateCountdown() {
    const now = new Date().getTime();
    const distance = endDate - now;

    if (distance < 0) {
      document.getElementById("countdown-wrapper").innerHTML = "<h2>S·ª± ki·ªán ƒë√£ k·∫øt th√∫c!</h2>";
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    document.getElementById("days").innerHTML = days;
    document.getElementById("hours").innerHTML = hours;
    document.getElementById("minutes").innerHTML = minutes;
    document.getElementById("seconds").innerHTML = seconds;
  }

  setInterval(updateCountdown, 1000);
  updateCountdown();
</script>
